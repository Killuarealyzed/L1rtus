<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Счётчик осколков командиров</title>
  <style>
    :root {
      --bg: #0a0a0f;
      --card-bg: #151520;
      --text: #e6e6ff;
      --accent: #a07cff;
      --border: #3a3a5a;
      --input-bg: #1e1e2e;
      --btn-bg: #2a2a4a;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', sans-serif;
    }

    body {
      background: var(--bg);
      color: var(--text);
      padding: 20px;
      min-height: 100vh;
    }

    .header {
      margin-bottom: 25px;
    }
    .back {
      display: block;
      color: var(--accent);
      text-decoration: none;
      font-weight: bold;
      font-size: 1.1rem;
      margin-bottom: 12px;
    }
    .lang-buttons {
      display: flex;
      gap: 8px;
    }
    .lang-btn {
      background: var(--btn-bg);
      border: 1px solid var(--accent);
      color: var(--accent);
      padding: 5px 10px;
      font-size: 0.9rem;
      font-weight: bold;
      cursor: pointer;
      border-radius: 4px;
      min-width: 36px;
      text-align: center;
    }
    .lang-btn.active {
      background: var(--accent);
      color: #000;
    }

    h2 {
      text-align: center;
      color: var(--accent);
      font-size: 2.5rem;
      font-weight: 700;
      margin: 12px 0 40px;
      text-shadow: 0 0 14px rgba(160, 124, 255, 0.7);
    }

    .section {
      max-width: 600px;
      margin: 0 auto;
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 25px;
      margin-bottom: 40px;
    }
    .section h3 {
      text-align: center;
      color: var(--accent);
      font-size: 1.6rem;
      margin-bottom: 20px;
    }

    .row {
      display: flex;
      align-items: center;
      margin: 12px 0;
    }
    .label {
      width: 100px;
      font-weight: bold;
    }
    select {
      background: var(--input-bg);
      border: 1px solid var(--border);
      color: var(--text);
      padding: 8px;
      border-radius: 6px;
      width: 70px;
    }
    .arrow {
      margin: 0 12px;
      color: var(--accent);
      font-weight: bold;
    }

    .result {
      margin-top: 25px;
      padding-top: 15px;
      border-top: 1px solid var(--border);
      text-align: center;
      font-size: 1.2rem;
    }
    .result strong {
      color: var(--accent);
      font-weight: 700;
    }
  </style>
</head>
<body>

<div class="header">
  <a href="index.html" class="back">← Back</a>
  <div class="lang-buttons">
    <button class="lang-btn" data-lang="ru">RU</button>
    <button class="lang-btn" data-lang="en">GB</button>
    <button class="lang-btn" data-lang="es">ES</button>
    <button class="lang-btn" data-lang="fr">FR</button>
    <button class="lang-btn" data-lang="ko">KO</button>
  </div>
</div>

<h2 data-key="title">Счётчик осколков командиров</h2>

<div class="section">
  <h3 data-key="epic">Эпический</h3>
  <div id="epic"></div>
  <div class="result">
    <span data-key="totalEpic">Всего осколков эпических:</span> <strong id="t1">0</strong>
  </div>
</div>

<div class="section">
  <h3 data-key="legendary">Легендарный</h3>
  <div id="legendary"></div>
  <div class="result">
    <span data-key="totalLegendary">Всего осколков легендарных:</span> <strong id="t2">0</strong>
  </div>
</div>

<script>
// === ЦЕНЫ ===
const epicCost = [
  10,10,   // 1-2
  15,15,   // 3-4
  20,20,   // 5-6
  25,25,   // 7-8
  30,30,   // 9-10
  35,35,   // 11-12
  40,40,   // 13-14
  45,45    // 15-16 → сумма = 440
];

const legCost = [
  10,10,   // 1-2
  15,15,   // 3-4
  30,30,   // 5-6
  40,40,   // 7-8
  50,50,   // 9-10
  55,55,   // 11-12
  65,65,   // 13-14
  80,80    // 15-16 → сумма = 690
];

// === ПЕРЕВОДЫ ===
const translations = {
  ru: {
    title: "Счётчик осколков командиров",
    epic: "Эпический",
    legendary: "Легендарный",
    skill1: "Навык 1:",
    skill2: "Навык 2:",
    skill3: "Навык 3:",
    skill4: "Навык 4:",
    totalEpic: "Всего осколков эпических:",
    totalLegendary: "Всего осколков легендарных:"
  },
  en: {
    title: "Commander Shards Calculator",
    epic: "Epic",
    legendary: "Legendary",
    skill1: "Skill 1:",
    skill2: "Skill 2:",
    skill3: "Skill 3:",
    skill4: "Skill 4:",
    totalEpic: "Total Epic Shards:",
    totalLegendary: "Total Legendary Shards:"
  },
  es: {
    title: "Calculadora de Fragmentos de Comandantes",
    epic: "Épico",
    legendary: "Legendario",
    skill1: "Habilidad 1:",
    skill2: "Habilidad 2:",
    skill3: "Habilidad 3:",
    skill4: "Habilidad 4:",
    totalEpic: "Fragmentos épicos totales:",
    totalLegendary: "Fragmentos legendarios totales:"
  },
  fr: {
    title: "Calculateur de Fragments de Commandants",
    epic: "Épique",
    legendary: "Légendaire",
    skill1: "Compétence 1 :",
    skill2: "Compétence 2 :",
    skill3: "Compétence 3 :",
    skill4: "Compétence 4 :",
    totalEpic: "Fragments épiques totaux :",
    totalLegendary: "Fragments légendaires totaux :"
  },
  // === КОРЕЙСКИЙ ===
  ko: {
    title: "지휘관 조각 계산기",
    epic: "에픽",
    legendary: "레전더리",
    skill1: "스킬 1:",
    skill2: "스킬 2:",
    skill3: "스킬 3:",
    skill4: "스킬 4:",
    totalEpic: "총 에픽 조각 수:",
    totalLegendary: "총 레전더리 조각 수:"
  }
};

let currentLang = localStorage.getItem('lang') || 'ru';

function setLanguage(lang) {
  currentLang = lang;
  localStorage.setItem('lang', lang);

  // Обновить все элементы с data-key
  document.querySelectorAll('[data-key]').forEach(el => {
    const key = el.getAttribute('data-key');
    if (translations[lang] && translations[lang][key]) {
      el.textContent = translations[lang][key];
    }
  });

  // Обновить кнопки языков
  document.querySelectorAll('.lang-btn').forEach(btn => {
    btn.classList.toggle('active', btn.dataset.lang === lang);
  });

  // Пересоздать интерфейс
  init();
}

function calc() {
  let eCur = 0, eTgt = 0, lCur = 0, lTgt = 0;

  for (let i = 1; i <= 4; i++) {
    eCur += Math.max(0, document.getElementById('e'+i+'c').value - 1);
    eTgt += Math.max(0, document.getElementById('e'+i+'t').value - 1);
    lCur += Math.max(0, document.getElementById('l'+i+'c').value - 1);
    lTgt += Math.max(0, document.getElementById('l'+i+'t').value - 1);
  }

  let eTotal = 0;
  for (let i = eCur; i < eTgt && i < epicCost.length; i++) {
    eTotal += epicCost[i];
  }

  let lTotal = 0;
  for (let i = lCur; i < lTgt && i < legCost.length; i++) {
    lTotal += legCost[i];
  }

  document.getElementById('t1').textContent = eTotal;
  document.getElementById('t2').textContent = lTotal;
}

function init() {
  const t = translations[currentLang];

  let html = '';
  for (let i = 1; i <= 4; i++) {
    html += `<div class="row">
      <div class="label">${t['skill'+i]}</div>
      <select id="e${i}c" onchange="calc()">`;
    for (let v = 1; v <= 5; v++) html += `<option>${v}</option>`;
    html += `</select><div class="arrow">→</div>
      <select id="e${i}t" onchange="calc()">`;
    for (let v = 1; v <= 5; v++) html += `<option>${v}</option>`;
    html += `</select></div>`;
  }
  document.getElementById('epic').innerHTML = html;

  html = '';
  for (let i = 1; i <= 4; i++) {
    html += `<div class="row">
      <div class="label">${t['skill'+i]}</div>
      <select id="l${i}c" onchange="calc()">`;
    for (let v = 1; v <= 5; v++) html += `<option>${v}</option>`;
    html += `</select><div class="arrow">→</div>
      <select id="l${i}t" onchange="calc()">`;
    for (let v = 1; v <= 5; v++) html += `<option>${v}</option>`;
    html += `</select></div>`;
  }
  document.getElementById('legendary').innerHTML = html;

  calc();
}

// Инициализация
document.querySelectorAll('.lang-btn').forEach(btn => {
  btn.addEventListener('click', () => setLanguage(btn.dataset.lang));
});

setLanguage(currentLang);
</script>
</body>
</html>